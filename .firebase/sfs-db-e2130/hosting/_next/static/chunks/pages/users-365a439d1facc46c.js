(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{4764:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return n(516)}])},1078:function(e,r,n){"use strict";n.d(r,{Z:function(){return I}});var s=n(5893),o=n(3100),t=n(204),i=n(8583),l=n(9008),a=n.n(l),c=n(7294),u=n(4453),x=n(4679);let d=()=>{let[e,r]=(0,i.KO)(x.q),[n]=(0,u.a)("(min-width: 48em)");return c.useEffect(()=>{r(n)},[n]),[e,r]};var h=n(634),p=n(6118),m=n(5152),j=n.n(m),g=n(7754),f=n(6877),b=n(8911),w=n(9222),y=n(9154),v=n(155),S=n(1539),C=n(1163),z=()=>{let e=(0,i.Dv)(S.K),r=(0,C.useRouter)();return e?(0,s.jsxs)(o.xu,{w:"238px",h:"185px",rounded:"15px",bg:"green.600",position:"relative",py:"17.47px",px:"18px",children:[(0,s.jsx)(g.M,{shadow:"sm",bg:"white",w:"38.21px",h:"38.21px",rounded:"12px",children:(0,s.jsx)(f.J,{as:v.k$3,boxSize:"26.2px",color:"green.600"})}),(0,s.jsxs)(o.xu,{position:"absolute",bottom:"18px",children:[(0,s.jsx)(b.x,{fontSize:"14px",fontWeight:700,color:"white",children:"Butuh Bantuan?"}),(0,s.jsx)(b.x,{fontSize:"12px",fontWeight:400,color:"white",children:"Silahkan cek dokumentasi"}),(0,s.jsx)(w.z,{mt:"10px",rounded:"12px",w:"203px",fontSize:"10px",fontWeight:700,color:"gray.700",onClick:()=>r.push("/"),children:"DOKUMENTASI"})]})]}):(0,s.jsx)(y.h,{"aria-label":"Dokumentasi",shadow:"sm",bg:"white",w:"38.21px",h:"38.21px",rounded:"12px",icon:(0,s.jsx)(f.J,{as:v.k$3,boxSize:"26.2px",color:"green.600"})})};let P=[{name:"User",icon:v.J4e,path:"/users"}],k=j()(()=>Promise.all([n.e(664),n.e(444)]).then(n.bind(n,1444)),{ssr:!1});var N=()=>{let e=(0,i.Dv)(S.K);return(0,s.jsxs)(h.g,{position:"relative",h:"100vh",children:[(0,s.jsx)(p.K,{w:e?"238px":"61px",pt:"22.5px",maxH:e?"calc(100vh - 300px)":"calc(100vh - 200px)",overflowY:"auto",pb:e?"25px":"0px",children:P.map((e,r)=>(0,s.jsx)(k,{menu:e,deep:0},"".concat(e.path,"-").concat(r)))}),(0,s.jsx)(o.xu,{position:"absolute",bottom:6,children:(0,s.jsx)(z,{})})]})},T=n(4804),_=n(3299),D=e=>{let{title:r,email:n}=e;return(0,s.jsxs)(T.U,{h:"113px",w:"full",children:[(0,s.jsx)(p.K,{mr:"auto",children:(0,s.jsx)(b.x,{fontSize:"24px",fontWeight:800,color:"green.600",children:r})}),(0,s.jsxs)(T.U,{gap:4,children:[(0,s.jsxs)(T.U,{children:[(0,s.jsx)(f.J,{as:v.J4e,boxSize:"18px",color:"teal.600"}),(0,s.jsx)(b.x,{fontSize:"15px",fontWeight:700,color:"teal.600",noOfLines:1,children:n})]}),(0,s.jsx)(f.J,{as:v.MDt,boxSize:"24px",color:"red.600",focusable:!0,onClick:()=>(0,_.signOut)()})]})]})},I=e=>{var r,n;let{children:l,pageTitle:c=" SFS DEMO"}=e,u=(0,C.useRouter)(),x=(0,_.useSession)({required:!0,onUnauthenticated(){u.push("/login")}}),h=(0,i.Dv)(S.K);return d(),(0,s.jsxs)(o.xu,{w:"100vw",h:"100vh",children:[(0,s.jsx)(a(),{children:(0,s.jsx)("title",{children:c})}),(0,s.jsxs)(t.k,{h:"100vh",w:"100vw",overflow:"auto",bg:"gray.50",children:[(0,s.jsx)(o.xu,{w:h?"255px":"99px",mx:"23px",children:(0,s.jsx)(N,{})}),(0,s.jsxs)(o.xu,{w:"calc(100vw - 23px - ".concat(h?"255px":"99px"," - 17px)"),children:[(0,s.jsx)(o.xu,{mx:"17px",children:(0,s.jsx)(D,{title:c,email:null==x?void 0:null===(n=x.data)||void 0===n?void 0:null===(r=n.user)||void 0===r?void 0:r.email})}),(0,s.jsx)(o.xu,{h:"calc(100vh - 113px)",overflow:"auto",ml:"17px",pr:"17px",mt:"20px",children:l})]})]})]})}},1846:function(e,r,n){"use strict";var s=n(5893),o=n(654),t=n(6177),i=n(8129),l=n(9056),a=n(438);n(7294),r.Z=e=>{let{label:r,inputProps:n,isDisabled:c,isRequired:u,paddingTop:x}=e,{field:{onChange:d,value:h},error:p}=(0,a.Wh)();return(0,s.jsxs)(o.NI,{isInvalid:!!p,pt:null!=x?x:1,children:[(0,s.jsx)(t.l,{children:r}),(0,s.jsx)(i.I,{...n,w:"100%",disabled:void 0!==c&&"true",onChange:e=>{d(e.target.value)},value:null!=h?h:"",required:u,type:"Password"===r||"Confirmation Password"===r?"password":"text",color:"gray.700",_hover:{borderColor:"green.700"}}),(0,s.jsx)(l.J1,{children:null==p?void 0:p.errorMessage})]})}},516:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return em}});var s=n(5893),o=n(7294),t=n(1078),i=n(3100),l=n(2402),a=n(3194),c=n(204),u=n(4804),x=n(8911),d=n(3863),h=n(3775),p=n(6877),m=n(8129),j=n(155),g=n(7335),f=n(9222),b=n(4151),w=n(5291),y=n(8369),v=n(191),S=n(3438),C=n(6880),z=n(634),P=n(7386),k=n(438),N=n(1604),T=n(1846);let _=[[N.Z_(),T.Z]],D=(0,k.DD)(_,{FormComponent:e=>{let{onSubmit:r,children:n,loading:o,layoutDisclosure:t,actionTitle:i}=e;return(0,s.jsxs)(b.u_,{isOpen:t.isOpen,onClose:t.onClose,size:"xl",scrollBehavior:"inside",children:[(0,s.jsx)(w.Z,{}),(0,s.jsx)(y.h,{rounded:"md",children:(0,s.jsxs)("form",{onSubmit:r,children:[(0,s.jsx)(v.x,{children:(0,s.jsxs)(x.x,{fontSize:"lg",fontWeight:700,children:[i," User"]})}),(0,s.jsx)(S.o,{}),(0,s.jsx)(C.f,{py:3,fontSize:"14px",children:(0,s.jsx)(z.g,{py:2,w:"full",children:n})}),(0,s.jsx)(P.m,{py:3,children:(0,s.jsxs)(c.k,{w:"full",justify:"flex-end",gap:3,children:[(0,s.jsx)(f.z,{fontSize:{base:"12px",md:"14px"},fontWeight:600,color:"orange.500",borderColor:"orange.500",variant:"outline",_hover:{bg:"tranparent"},leftIcon:(0,s.jsx)(p.J,{as:j.bjh,boxSize:4}),onClick:t.onClose,children:"Cancel"}),(0,s.jsx)(f.z,{type:"submit",fontSize:{base:"12px",md:"14px"},color:"white",fontWeight:600,bg:"green.500",_hover:{bg:"tranparent"},leftIcon:(0,s.jsx)(p.J,{as:j.Tri,boxSize:4}),isLoading:o,children:"Save"})]})})]})})]})}}),I=N.z.string({required_error:"Email is required"}).email("Enter a real email please."),q=N.z.string({required_error:"Name is required"}),O=N.z.string({required_error:"Phone number is required"}).regex(/^(\+\d{1,3})?\d{10}$/,"Please enter a valid phone number format with country code Example: +1234567890 or 1234567890"),U=N.z.string({required_error:"Confirmation password is required"}).min(6,"Password must be at least 6 characters long"),E=N.z.object({email:I,displayName:q,phoneNumber:O,password:U,confirmation_password:U}).refine(e=>e.password===e.confirmation_password,{message:"Passwords don't match",path:["confirmation_password"]}),J=N.z.object({email:I,displayName:q,phoneNumber:O});var W=n(8228),K=n(7848);let M=async e=>{let r="/api/getUsers";e.search&&(r="/api/searchUser");let n=new URLSearchParams(e).toString(),s="".concat(r,"?").concat(n),o=await fetch(s),t=await o.json();return{users:t.users||[],nextPageToken:t.nextPageToken||null}},Z=async e=>{try{let r=await fetch("/api/createUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return r.json()}catch(e){console.error("Mutation error:",e)}},L=async e=>{try{let r=await fetch("/api/updateUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return r.json()}catch(e){console.error("Mutation error:",e)}},F=async e=>{try{let r=await fetch("/api/deleteUser?uid=".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}});return r.json()}catch(e){console.error("Mutation error:",e)}},A=e=>(0,K.a)({queryKey:["users",e.nextPageToken],queryFn:()=>M(e),keepPreviousData:!0});var B=e=>{let{refetch:r}=e,n=(0,g.q)(),o=(0,a.p)(),{mutateAsync:t,isLoading:i}=(0,W.D)(Z,{onSuccess:e=>{e.error?o({status:"error",title:e.error.message,position:"top",isClosable:!0}):(o({status:"success",title:"Create user successfull",position:"top",isClosable:!0}),r(),n.onClose())},onError:e=>{console.error("Mutation error:",e)}}),l=async e=>{t(e)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.z,{fontSize:{base:"12px",md:"14px"},color:"white",fontWeight:600,bg:"green.500",_hover:{bg:"tranparent"},leftIcon:(0,s.jsx)(p.J,{as:j.xcL,boxSize:4}),onClick:()=>n.onOpen(),children:"Create"}),(0,s.jsx)(D,{schema:E,onSubmit:l,formProps:{layoutDisclosure:n,actionTitle:"Insert",loading:i},defaultValues:{email:"",displayName:"",phoneNumber:""},props:{email:{label:"Email",inputProps:{placeholder:"Input email address, ex : marco@mail"}},displayName:{label:"Name",inputProps:{placeholder:"Input name, ex : Marco"}},phoneNumber:{label:"Phone Number",inputProps:{placeholder:"Input phone number, ex : +6288173566622"}},password:{label:"Password",inputProps:{placeholder:"Input password"}},confirmation_password:{label:"Confirmation Password",inputProps:{placeholder:"Input confirmation password"}}}})]})},V=n(5945),Y=n(4679),$=e=>{let{refetch:r,setSearchValue:n}=e,[t,i]=o.useState(""),l=(0,V.NL)(),g=(0,a.p)();return(0,s.jsxs)(c.k,{flexDir:{base:"column",md:"row"},justifyContent:"space-between",alignItems:{base:"flex-start",md:"center"},mb:6,children:[(0,s.jsxs)(u.U,{gap:6,children:[(0,s.jsx)(x.x,{fontSize:"lg",fontWeight:700,children:"User"}),(0,s.jsxs)(d.B,{w:{base:"auto",md:"308px"},children:[(0,s.jsx)(h.Z,{width:"2.5rem",children:(0,s.jsx)(p.J,{as:j.eaK,color:"gray.600",boxSize:4})}),(0,s.jsx)(m.I,{type:"search",fontSize:"xs",placeholder:"Search by email address",bg:"gray.100",color:"gray.600",value:t,onKeyDown:e=>{if("Enter"===e.key){if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(t)&&""!==t)return g({status:"warning",title:"Invalid email format",position:"top",isClosable:!0}),!1;l.prefetchQuery({queryKey:["users",null],queryFn:()=>M({nextPageToken:null,limit:Y.b,search:t})}),n(t)}},onChange:e=>i(e.target.value)})]})]}),(0,s.jsx)(u.U,{gap:4,children:(0,s.jsx)(B,{refetch:r})})]})},Q=n(6354),R=n(6557),X=n(4304),H=n(6526),G=n(5421),ee=n(8650),er=n(577),en=n(6893),es=e=>{let{userData:r,refetch:n}=e,o=(0,g.q)(),t=(0,a.p)(),{mutateAsync:i,isLoading:l}=(0,W.D)(L,{onSuccess:e=>{e.error?t({status:"error",title:e.error.message,position:"top",isClosable:!0}):(t({status:"success",title:"Update user successfull",position:"top",isClosable:!0}),n(),o.onClose())},onError:e=>{console.error("Mutation error:",e)}}),c=async e=>{i({uid:r.uid,...e})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.z,{fontSize:{base:"12px",md:"14px"},color:"white",fontWeight:600,bg:"orange.500",_hover:{bg:"tranparent"},leftIcon:(0,s.jsx)(p.J,{as:en.IYd,boxSize:4}),onClick:()=>o.onOpen(),children:"Change"}),(0,s.jsx)(D,{schema:J,onSubmit:c,formProps:{layoutDisclosure:o,actionTitle:"Update",loading:l},defaultValues:{email:r.email,displayName:r.displayName,phoneNumber:r.phoneNumber},props:{email:{label:"Email",inputProps:{placeholder:"Input email address, ex : marco@mail"}},displayName:{label:"Name",inputProps:{placeholder:"Input name, ex : Marco"}},phoneNumber:{label:"Phone Number",inputProps:{placeholder:"Input phone number, ex : 6281017232"}}}})]})},eo=n(3750),et=e=>{let{layoutDisclosure:r,userData:n,refetch:o}=e,t=(0,a.p)(),{mutateAsync:i,isLoading:l}=(0,W.D)(F,{onSuccess:e=>{e.error?t({status:"error",title:e.error.message,position:"top",isClosable:!0}):(t({status:"success",title:"Delete user successfull",position:"top",isClosable:!0}),o(),r.onClose())},onError:e=>{console.error("Mutation error:",e)}});return(0,s.jsxs)(b.u_,{isOpen:r.isOpen,onClose:r.onClose,size:"xl",scrollBehavior:"inside",children:[(0,s.jsx)(w.Z,{}),(0,s.jsxs)(y.h,{rounded:"md",children:[(0,s.jsx)(v.x,{pb:0,children:(0,s.jsx)(x.x,{fontSize:"lg",fontWeight:700,children:"Delete user"})}),(0,s.jsx)(S.o,{}),(0,s.jsx)(C.f,{py:4,fontSize:"14px",children:(0,s.jsxs)(x.x,{children:["Are you sure delete this ",(0,s.jsx)(x.x,{as:"b",children:"user "}),(0,s.jsx)(x.x,{as:"b",textColor:"red.500",children:n.email}),"?"]})}),(0,s.jsx)(P.m,{py:3,children:(0,s.jsxs)(c.k,{w:"full",justify:"flex-end",gap:3,children:[(0,s.jsx)(f.z,{fontSize:{base:"12px",md:"14px"},fontWeight:600,color:"orange.500",borderColor:"orange.500",variant:"outline",_hover:{bg:"tranparent"},leftIcon:(0,s.jsx)(p.J,{as:j.bjh,boxSize:4}),onClick:r.onClose,children:"Cancel"}),(0,s.jsx)(f.z,{type:"submit",fontSize:{base:"12px",md:"14px"},color:"white",fontWeight:600,bg:"red.500",_hover:{bg:"tranparent"},leftIcon:(0,s.jsx)(p.J,{as:eo.VgY,boxSize:4}),onClick:()=>{i(n.uid)},isLoading:l,children:"Sure, Delete"})]})})]})]})},ei=e=>{let{userData:r,refetch:n}=e,o=(0,g.q)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.z,{fontSize:{base:"12px",md:"14px"},color:"white",fontWeight:600,bg:"red.500",_hover:{bg:"tranparent"},leftIcon:(0,s.jsx)(p.J,{as:eo.VgY,boxSize:4}),onClick:()=>o.onOpen(),children:"Delete"}),(0,s.jsx)(et,{layoutDisclosure:o,userData:r,refetch:n})]})},el=e=>{let{currentPage:r,totalPages:n,onPageChange:o,pageToken:t}=e,i=Array.from({length:n},(e,r)=>r+1);return(0,s.jsx)(u.U,{spacing:2,children:i.map(e=>(0,s.jsx)(f.z,{colorScheme:e===r?"blue":"gray",onClick:()=>o(e,t),children:e},e))})},ea=e=>{let{user:r,refetch:n,pageToken:o,currentPage:t,handlePageChange:i}=e;return(0,s.jsxs)(Q.x,{children:[(0,s.jsxs)(R.i,{overflowX:"auto",fontSize:"xs",children:[(0,s.jsx)(X.h,{bg:"green.500",children:(0,s.jsxs)(H.Tr,{children:[(0,s.jsx)(G.Th,{textColor:"white",children:"UID"}),(0,s.jsx)(G.Th,{textColor:"white",children:"Name"}),(0,s.jsx)(G.Th,{textColor:"white",children:"Email"}),(0,s.jsx)(G.Th,{textColor:"white",children:"Phone Number"}),(0,s.jsx)(G.Th,{textColor:"white",position:"sticky",width:"200px",right:0,bg:"green.500",children:"Action"})]})}),(0,s.jsx)(ee.p,{children:r.map((e,r)=>(0,s.jsxs)(H.Tr,{children:[(0,s.jsx)(er.Td,{children:e.uid}),(0,s.jsx)(er.Td,{children:e.displayName}),(0,s.jsx)(er.Td,{children:e.email}),(0,s.jsx)(er.Td,{children:e.phoneNumber}),(0,s.jsx)(er.Td,{children:(0,s.jsxs)(u.U,{justify:"center",children:[(0,s.jsx)(es,{userData:e,refetch:n}),(0,s.jsx)(ei,{userData:e,refetch:n})]})})]},"".concat(e.uid,"---").concat(r)))})]}),(0,s.jsx)(el,{currentPage:t,totalPages:10,pageToken:o,onPageChange:i})]})},ec=n(5103),eu=n(8583);let ex=(0,ec.cn)([]),ed=()=>{let[e,r]=(0,eu.KO)(ex);return{paginationData:e,startPagination:()=>r([]),setPagination:n=>r([...e,n])}};var eh=()=>{let[e,r]=o.useState(null),[n,t]=o.useState(""),[a,c]=o.useState(1),u=(0,V.NL)(),{paginationData:x,setPagination:d,startPagination:h}=ed(),{data:p,isLoading:m}=A({nextPageToken:e,limit:Y.b,search:n}),j=()=>{u.prefetchQuery({queryKey:["users",null],queryFn:()=>M({nextPageToken:null,limit:Y.b,search:n})}),c(1),h()};return(0,s.jsxs)(i.xu,{p:{base:4,md:6},shadow:"md",rounded:"lg",bg:"white",children:[(0,s.jsx)($,{setSearchValue:t,refetch:j}),m?(0,s.jsx)(l.N,{mt:"4",noOfLines:4,spacing:"4",skeletonHeight:"2"}):(0,s.jsx)(ea,{user:null==p?void 0:p.users,refetch:j,pageToken:null==p?void 0:p.nextPageToken,currentPage:a,handlePageChange:(e,s)=>{let o=s,t=Y.b;x[e-2]?o=x[e-2]:1===e?o=null:(null==p?void 0:p.users.length)<Y.b&&(o=null,t=0),-1===x.indexOf(s)&&d(s),u.prefetchQuery({queryKey:["users",o],queryFn:()=>M({nextPageToken:o,limit:t,search:n})}),c(e),r(o)}})]})};let ep=()=>(0,s.jsx)(eh,{});ep.getLayout=e=>(0,s.jsx)(t.Z,{pageTitle:"User",children:e});var em=ep},4679:function(e,r,n){"use strict";n.d(r,{b:function(){return t},q:function(){return o}});var s=n(5103);let o=(0,s.cn)(!1),t=10},1539:function(e,r,n){"use strict";n.d(r,{K:function(){return o}});var s=n(5495);let o=(0,s.O4)("sidebar",!0)}},function(e){e.O(0,[260,13,225,661,310,774,888,179],function(){return e(e.s=4764)}),_N_E=e.O()}]);